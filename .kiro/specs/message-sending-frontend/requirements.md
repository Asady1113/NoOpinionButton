# 要件定義書

## 概要

この機能は、participant.vueページにメッセージ送信機能を実装します。参加者がメッセージを入力し、APIエンドポイントに送信できるUIを提供します。実装は既存のフロントエンドアーキテクチャパターンに従い、Vue 3 Composition APIとTailwind CSSを使用します。

## 要件

### 要件1

**ユーザーストーリー:** 参加者として、メッセージを入力して送信したい。これにより、他の参加者とリアルタイムでコミュニケーションできる。

#### 受け入れ基準

1. WHEN 参加者がメッセージ入力フィールドにテキストを入力する THEN システムは入力内容を受け付ける必要がある
2. WHEN 参加者が送信ボタンをクリックする THEN システムはAPIエンドポイント（https://epb29yiylc.execute-api.ap-northeast-1.amazonaws.com/prod/message）にPOSTリクエストを送信する必要がある
3. WHEN APIリクエストを送信する THEN システムはmeetingId、participantId、contentを含むリクエストボディを送信する必要がある
4. WHEN メッセージ送信が成功する THEN システムは入力フィールドをクリアする必要がある
5. WHEN メッセージ送信が失敗する THEN システムは適切なエラーメッセージを表示する必要がある

### 要件2

**ユーザーストーリー:** 参加者として、メッセージ送信フォームを簡単に操作したい。これにより、スムーズにメッセージを送信できる。

#### 受け入れ基準

1. WHEN メッセージ入力フィールドを表示する THEN システムはプレースホルダーテキスト「匿名意見を入力してください」を表示する必要がある
2. WHEN 入力フィールドが空の場合 THEN システムは送信ボタンを無効化する必要がある
3. WHEN 入力フィールドにテキストがある場合 THEN システムは送信ボタンを有効化する必要がある
4. WHEN 送信処理中の場合 THEN システムは送信ボタンを無効化し、ローディング状態を表示する必要がある

### 要件3

**ユーザーストーリー:** 参加者として、メッセージ送信フォームを見やすい位置に配置したい。これにより、メッセージ受信と送信を効率的に行える。

#### 受け入れ基準

1. WHEN メッセージ送信フォームを表示する THEN システムはメッセージ受信コンポーネントの下に配置する必要がある
2. WHEN フォームを表示する THEN システムは横幅いっぱいの入力フィールドと右側の送信ボタンを配置する必要がある
3. WHEN フォームを表示する THEN システムは既存のデザインパターンと一貫性を保つ必要がある
4. WHEN 送信ボタンを表示する THEN システムは青色の三角形アイコンを使用する必要がある

### 要件4

**ユーザーストーリー:** 開発者として、メッセージ送信機能を既存のアーキテクチャパターンに従って実装したい。これにより、コードの一貫性と保守性が保たれる。

#### 受け入れ基準

1. WHEN メッセージ送信機能を実装する THEN システムはVue 3 Composition APIを使用する必要がある
2. WHEN API通信を実装する THEN システムはcomposableパターンを使用する必要がある
3. WHEN エラーハンドリングを実装する THEN システムは既存のApiErrorタイプとエラーハンドリングパターンを使用する必要がある
4. WHEN UIコンポーネントを実装する THEN システムはTailwind CSSクラスを使用する必要がある
5. WHEN フォームバリデーションを実装する THEN システは最小限のバリデーション（空文字チェック）のみを行う必要がある

### 要件5

**ユーザーストーリー:** 参加者として、メッセージ送信の状態を把握したい。これにより、送信が正常に完了したかを確認できる。

#### 受け入れ基準

1. WHEN メッセージ送信を開始する THEN システムは送信中状態を表示する必要がある
2. WHEN メッセージ送信が成功する THEN システムは入力フィールドをクリアし、通常状態に戻る必要がある
3. WHEN メッセージ送信が失敗する THEN システムはエラーメッセージを表示する必要がある
4. WHEN ネットワークエラーが発生する THEN システムは適切なエラーハンドリングを行う必要がある
5. WHEN APIエラーが発生する THEN システムは既存のエラーハンドリングパターンを使用する必要がある